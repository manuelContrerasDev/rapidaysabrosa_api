ğŸ§ª 3ï¸âƒ£ Prueba en Postman

MÃ©todo: PUT

URL: http://localhost:4000/api/products/6
(usa un ID existente)

Body â†’ raw â†’ JSON

{
  "price": 11500,
  "description": "Mozzarella, cheddar, azul y parmesano con toque de orÃ©gano.",
  "available": true
}


âœ… Resultado

âœ”ï¸ Actualiza solo los campos enviados
âœ”ï¸ Valida que el producto exista antes de modificarlo
âœ”ï¸ Compatible con frontend React (fetch/axios PUT)

--------------------------------------------------------------------
--------------------------------------------------------------------
Swagger UI estÃ¡ funcionando âœ…

DocumentaciÃ³n API profesional, limpia y navegable, con todos los endpoints listados (GET, POST, PUT, DELETE) y sus schemas de respuesta.
Ya tus clientes podrÃ¡n ver, probar y entender cÃ³mo usar la API sin necesidad de Postman ğŸ¯


Resumen:

âœ… El createProduct captura errores â†’ responde 500
âœ… Morgan los registra en consola
âœ… El middleware global formatea cualquier error inesperado
âœ… Swagger sigue documentando todo correctamente

--------------------------------------------------------------------
--------------------------------------------------------------------
ğŸ§± Paso 3 â€” ValidaciÃ³n con Zod

npm i zod


1ï¸âƒ£ Instalar dependencias de seguridad

Ejecuta en tu terminal:

npm i helmet express-rate-limit xss-clean

helmet â†’ agrega cabeceras HTTP seguras (CSP, noSniff, etc.).
express-rate-limit â†’ limita peticiones por IP (evita ataques o spam).
xss-clean â†’ limpia entrada de texto contra inyecciÃ³n de scripts.
(Nota: xss-clean es muy liviano y funciona perfecto junto con Zod).

--------------------------------------------------------------------
--------------------------------------------------------------------

ğŸ§  CORS

app.use(cors({
  origin: ["http://localhost:5173", "https://rapidaysabrosa-ecommerce.vercel.app/"],
  methods: ["GET", "POST", "PUT", "DELETE"],
  credentials: true,
}));


Eso permite que solo tu frontend local y el deploy en Vercel puedan comunicarse con tu backend.
ğŸ’¡ Esto evita bloqueos CORS y mantiene seguridad.

--------------------------------------------------------------------
--------------------------------------------------------------------
Arquitectura

Rol	Plataforma	               FunciÃ³n
Frontend (React)	Vercel	     UI/UX del usuario
Backend (Express/Prisma)	     Render	API + LÃ³gica de negocio
Base de datos (PostgreSQL)	   Render	Datos persistentes

--------------------------------------------------------------------
--------------------------------------------------------------------

rateLimit.js

ğŸ§  CÃ³mo funciona
Limitador	Uso	Ideal para
apiLimiter	Se aplica globalmente a todas las rutas /api	Evita flood o ataques DoS
strictLimiter	Se usa solo en endpoints especÃ­ficos	Ej: /login, /register, /products (creaciÃ³n)